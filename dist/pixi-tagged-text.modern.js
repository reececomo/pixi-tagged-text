import*as u from"pixi.js";function F(){return F=Object.assign||function(u){for(var F=1;F<arguments.length;F++){var t=arguments[F];for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(u[e]=t[e])}return u},F.apply(this,arguments)}const t=(u,t)=>F({},u,t),e=u=>u[u.length-1],n=u=>void 0!==u,i=(u,F)=>t=>[t].flat(255).reduce(u,F),s=u=>i((F,t)=>F&&u(t),!0),r=(u,F=!1,t)=>(e,n)=>{!0!==F&&(0,console.warn)(`[${e}] ${n}`),u&&u({target:t,code:e,message:n,type:"warning"})},o=F=>"string"==typeof F||F instanceof u.Texture||F instanceof HTMLCanvasElement||F instanceof HTMLVideoElement;var a;!function(u){u.default="px",u.px="px",u.em="em",u.rem="rem",u.pt="pt",u.pc="pc",u.in="in",u.cm="cm",u.mm="mm",u.percent="%",u.unknown="unknown"}(a||(a={}));const l=a.default,D=()=>({content:"",bounds:new u.Rectangle,fontProperties:{ascent:0,descent:0,fontSize:0},style:{},tags:"",textDecorations:[]}),E=u=>""!==u&&u.split("").every(u=>0===u.search(/\s/)),B=s(F=>F.content instanceof u.Sprite),h=u=>"string"==typeof u.content,d=s(h),C=s(u=>void 0!==u&&h(u)&&E(u.content)),c=u=>{return void 0!==u&&h(u)&&E(F=u.content)&&"\n"===F;var F},p=u=>void 0!==u&&s(c)(u),A=(g=C,u=>!g(u));var g;const f=u=>u instanceof Object&&0===Object.keys(u).length,y=u=>{if(void 0===u)throw new Error("value is undefined!");if("number"==typeof u)return{value:u,unit:l};u=u.trim();const F=new RegExp(Object.values(a).join("|")+"$"),t=u.search(F);if(-1!==t)return{value:parseFloat(u.slice(0,t)),unit:u.slice(t)};if(0===u.search(/^[\d.]+$/)){const F=parseFloat(u);if(!1===isNaN(F))return{value:parseFloat(u),unit:l}}return r()("invalid-units",`${u} is not a valid measurement value. Please use one of the following units: ${Object.keys(a).join(", ")}`),{value:NaN,unit:a.unknown}},m=r(),w=(u=["\\w+"])=>{const F=u=>`(${u})`,t=F(u.join("|")),e=F("(?:\\s+[^>]*)*")+"+";return new RegExp(`${"<"+t+e+"\\s*>"}|</${t}\\s*>`,"g")},x=(u="")=>{if(""===u)return{};const F=u.trim().match(/[a-zA-Z][a-zA-Z0-9]*=('|")[^'"]*('|")/g);if(null===F)throw new Error('Invalid attributes string: "'+u+'"');return[...F].reduce((u,F)=>{const t=[F.substring(0,F.indexOf("=")),F.substring(F.indexOf("=")+1)],e=t[0].trim(),n=t[1].substring(1,t[1].length-1).trim();return u[e]=n,u},{})},b=u=>{const{0:F,1:t,2:e,3:n,index:i}=u;return{tag:F,tagName:null!=t?t:n,isOpening:void 0!==t,attributes:x(e),index:i}},S=(()=>{const u=u=>`(${u})`,F=u=>u+"*";return new RegExp("<"+u("[A-Za-z_]"+F("[A-Za-z0-9_]"))+u(F(`[^${["/",">"].join("")}]`))+"/>","g")})(),v=u=>F({tag:u.tagName,children:[]},f(u.attributes)?{}:{attributes:u.attributes}),_=u=>{const F=u.split(" ");let t="";for(let u=0;u<F.length;u++)t+=`${F[u].charAt(0).toUpperCase()}${F[u].substr(1)} `;return t.trim()},T=u=>0===u.search(/^\s+$/),N=F=>u.TextMetrics.measureFont(F.font),$=(u,F=!1)=>{if(F)return u.updateText(!1),N(u.context);{var t;const F=N(u.context),e=null!=(t=u.style.fontSize)?t:NaN;if(10===F.ascent&&3===F.descent&&(isNaN(Number(e))||e>13))throw new Error("getFontPropertiesOfText() returned metrics associated with a Text field that has not been updated yet. Please try using the forceUpdate parameter when you call this function.");return N(u.context)}},k={valign:"baseline",dropShadowColor:0,fill:0,fontSize:26,stroke:0,imgDisplay:"inline",wordWrap:!0,wordWrapWidth:500,iconScale:1,breakLines:!0};Object.freeze(k);const j=t,O=u=>u.filter(n).reduce(j,{}),M=(u,F,e={})=>{var n;const i=null!=(n=((u={},F={})=>{if(!f(F)||!f(u))return t(F,(u=>{const F={};for(const t in u){const e=u[t],n="string"==typeof e&&0===e.trim().search(/^-?[0-9]*\.?[0-9]+$/);F[t]=n?parseFloat(e):e}return F})(u))})(e,F[u]))?n:{};if(0!==Object.values(i).length)return i},I=u=>{if(void 0!==u)switch(u){case"justify":case"justify-left":case"justify-all":return"left";case"justify-center":return"center";case"justify-right":return"right";default:return u}},z=new u.Text(""),P=(F,t={x:0,y:0})=>new u.Rectangle(t.x+F.x,t.y+F.y,F.width,F.height),W=u=>t=>t.map((u=>t=>F({},t,{x:t.x+u.x,y:t.y+u.y}))(u)),U=u=>{const F=u[0],t=e(u);return void 0===F?0:t===F?F.width:t.x+t.width-F.x},L=u=>t=>F({},t,{x:u}),R=u=>F=>{let t;return F.map(F=>(void 0===t?(F.bounds.x=u,t=F.bounds):(F.bounds.x=t.x+t.width,t=F.bounds),F))},G=(u={x:NaN,y:NaN,width:NaN,height:NaN},F={x:NaN,y:NaN,width:NaN,height:NaN})=>{if(isNaN(u.x))return F;const t=Math.min(u.x,F.x),e=Math.min(u.y,F.y);return{x:t,y:e,width:Math.max(u.x+u.width,F.x+F.width)-t,height:Math.max(u.y+u.height,F.y+F.height)-e}},H=i((u,F)=>G(u,F.bounds),{x:NaN,y:NaN,width:NaN,height:NaN}),V=u=>u.reduce((u,F,t)=>0===t?[L(0)(F)]:u.concat([L(u[t-1].x+u[t-1].width)(F)]),[]),J=u=>F=>W({x:u-U(F),y:0})(V(F)),Z=u=>F=>{return W({x:(t=U(F),e=u,(e-t)/2),y:0})(V(F));var t,e},X=u=>t=>{if(0===t.length)return[];const e=t.filter(({width:u})=>u>0),n=e.length;if(1===n){const[u,...F]=t;return u.x=0,[u,...F]}const i=[],s=e.reduce(G,{x:NaN,y:NaN,width:NaN,height:NaN}),r=(u-s.width)/(n-1);let o;for(let u=0;u<t.length;u++){const e=t[u];if(0===e.width){i[u]=F({},e);continue}let n;if(n=void 0===o?0:o.x+o.width+r,isNaN(n))throw new Error("Something went wrong with the justified layout calculation. x is NaN.");const s=L(n)(e);o=s,i[u]=s}return i},Y=u=>i((u,F)=>{var t,e;let n=null!=(t=F.bounds.height)?t:0;return B(F)&&(n+=F.fontProperties.descent),n>(null!=(e=null==u?void 0:u.bounds.height)?e:0)?F:u},D())(u),q=u=>""!==u,K=u=>u.replace(/\s/g,"_ðŸ”ª_$&_ðŸ”ª_").split("_ðŸ”ª_").filter(u=>""!==u),Q={debug:!1,debugConsole:!1,splitStyle:"words",imgMap:{},scaleIcons:!0,skipUpdates:!1,skipDraw:!1,drawWhitespace:!1,wrapEmoji:!0,errorHandler:void 0,supressConsole:!1,overdrawDecorations:0},uu={fontFamily:"courier",fontSize:10,fill:16777215,dropShadow:!0},Fu={default:k};Object.freeze(Fu),Object.freeze(k);const tu={children:!0,texture:!0};class eu extends u.Sprite{static get defaultStyles(){return Fu}static get defaultOptions(){return Q}get options(){return this._options}get needsUpdate(){return this._needsUpdate}get needsDraw(){return this._needsDraw}get tokens(){return this._tokens}get tokensFlat(){return this._tokens.flat(3)}get text(){return this._text}set text(u){this.setText(u)}setText(u,F){u===this._text&&!1===this._needsUpdate||(this._text=u,this._needsUpdate=!0,this.updateIfShould(F))}get untaggedText(){return this.text.replace(w(),"")}get tagStyles(){return this._tagStyles}set tagStyles(u){this.setTagStyles(u)}setTagStyles(u,F){Object.entries(u).forEach(([u,F])=>this.setStyleForTag(u,F,!0)),this._needsUpdate=!0,this.updateIfShould(F)}getStyleForTag(u,F={}){return M(u,this.tagStyles,F)}getStyleForTags(u){const F=u.map(({tagName:u,attributes:F})=>this.getStyleForTag(u,F));return O(F)}setStyleForTag(u,F,t){return this.tagStyles[u]=F,"default"===u&&this.defaultStyle.imgSrc&&(this.logWarning("imgSrc-on-default",'Style "imgSrc" can not be set on the "default" style because it will add images to EVERY tag!'),this.defaultStyle.imgSrc=void 0),this._needsUpdate=!0,this.updateIfShould(t),!0}removeStylesForTag(u,F){return u in this.tagStyles&&(delete this.tagStyles[u],this._needsUpdate=!0,this.updateIfShould(F),!0)}get defaultStyle(){var u;return null==(u=this.tagStyles)?void 0:u.default}set defaultStyle(u){this.setDefaultStyle(u)}setDefaultStyle(u,F){this.setStyleForTag("default",u,F)}get textFields(){return this._textFields}get sprites(){return this._sprites}get decorations(){return this._decorations}get spriteTemplates(){return this._spriteTemplates}get textContainer(){return this._textContainer}get decorationContainer(){return this._decorationContainer}get spriteContainer(){return this._spriteContainer}get debugContainer(){return this._debugContainer}constructor(t="",e={},n={},i,s,o){super(o),this._bitmapFontOptions=void 0,this._bitmapTextBehavior=void 0,this._options=void 0,this._needsUpdate=!0,this._needsDraw=!0,this._tokens=[],this._text="",this._tagStyles={},this._textFields=[],this._sprites=[],this._decorations=[],this._spriteTemplates={},this._debugGraphics=void 0,this._textContainer=void 0,this._decorationContainer=void 0,this._spriteContainer=void 0,this._debugContainer=void 0,this.logWarning=(u,F)=>r(this.options.errorHandler,this.options.supressConsole,this)(u,F),this._textContainer=new u.Container,this._spriteContainer=new u.Container,this._decorationContainer=new u.Container,this._debugContainer=new u.Container,this._debugGraphics=new u.Graphics,this._bitmapFontOptions=null!=i?i:eu.DEFAULT_BITMAP_FONT_OPTIONS,this._bitmapTextBehavior=null!=s?s:eu.DEFAULT_BITMAP_TEXT_BEHAVIOR,this.resetChildren();const a=F({},Q,n);this._options=a,e=F({default:{}},e),this.options.wrapEmoji&&(e.__EMOJI__=F({fontFamily:"sans-serif"},e.__EMOJI__));const l=F({},k,e.default);e.default=l,this.tagStyles=e,this.options.imgMap&&this.createSpriteTemplatesFromSourceMap(this.options.imgMap),this.text=t}destroyImgMap(){if(this.destroyed)throw new Error("destroyImgMap() was called after this object was already destroyed. You must call destroyImgMap() before destroy() because imgMap is cleared when the object is destroyed.");this._spriteContainer.destroy({children:!0,texture:!0,baseTexture:!0})}destroy(u){let t={};"boolean"==typeof u&&(u={children:u}),t=F({},tu,u),this._spriteContainer.destroy(!1),super.destroy(t),this._textFields=[],this._sprites=[],this._decorations=[],this._spriteTemplates={},this._tokens=[],this._tagStyles={},this._options.imgMap={},this._options.skipUpdates=!0,this._options.skipDraw=!0,this._options={}}resetChildren(){this._textContainer&&(this._textContainer.removeChildren(),this.removeChild(this._textContainer)),this._textContainer=new u.Container,this.addChild(this._textContainer),this._spriteContainer&&(this._spriteContainer.removeChildren(),this.removeChild(this._spriteContainer)),this._spriteContainer=new u.Container,this.addChild(this._spriteContainer),this._decorationContainer&&(this._decorationContainer.removeChildren(),this.removeChild(this._decorationContainer)),this._decorationContainer=new u.Container,this.addChild(this._decorationContainer),this._debugContainer&&(this._debugContainer.removeChildren(),this.removeChild(this._debugContainer)),this._debugContainer=new u.Container,this.addChild(this._debugContainer),this._textFields=[],this._sprites=[],this._decorations=[]}createSpriteTemplatesFromSourceMap(t){this._spriteTemplates={},Object.entries(t).forEach(([t,e])=>{var n,i;const s=new TypeError(`The spriteSource provided for key ${t} was not in a valid format. Please use a Sprite, Texture, BaseTexture, string, HTMLImageElement, HTMLVideoElement, HTMLCanvasElement, or SVGElement`),r=new Error(`The spriteSource provided for key ${t} appears to be a Sprite or Texture that has been destroyed or removed from PIXI.TextureCache probably using \`destroy()\` with aggressive options or \`destroyImgMap()\`.`);let a=null,l=new u.Sprite;try{e instanceof u.Sprite?l=e:o(e)?l=u.Sprite.from(e):(u=>u instanceof HTMLImageElement)(D=e)||(F=>F instanceof u.BaseTexture)(D)?l=u.Sprite.from(u.Texture.from(e)):(a=s,console.log(a))}catch(u){a=u,console.log(a)}var D;if((o(e)&&null===e.baseTexture||void 0!==l&&(l.destroyed||null===(null==(n=l.texture)?void 0:n.baseTexture)))&&(a=r,console.log(a)),a)throw a;const E=u=>{this.onImageTextureUpdate(u),u.removeListener("update",E)};l.texture.baseTexture.addListener("update",E),this.spriteTemplates[t]=l;const B=F({imgSrc:t},null!=(i=this.getStyleForTag(t))?i:{});this.setStyleForTag(t,B)})}onImageTextureUpdate(u){this._needsUpdate=!0,this._needsDraw=!0,this.updateIfShould()}updateIfShould(u){return(!1===u||void 0===u&&!1===this.options.skipUpdates)&&(this.update(),!0)}update(t){const n=this.tagStyles,{splitStyle:i,scaleIcons:s}=this.options,r=this.options.imgMap&&this.spriteTemplates,o=((t,e,n)=>{var i;const s=null!=(i=e.default)?i:{},r=[],o=[],l={},D=t=>{var i,E;if("string"==typeof t)return t;const{tag:B,attributes:h={}}=t;let d=s,C="";const c=null!=(i=o[o.length-1])?i:k.fontSize;var p;B&&(r.push({tagName:B,attributes:h}),C=(p=r,p.map(u=>u.tagName)).join(","),d=((u,F,t)=>{const e=JSON.stringify(u);if(void 0===t[e]){const n=F.default,i=u.map(u=>(({tagName:u,attributes:F},t)=>M(u,t,F))(u,F)),s=[n,...i];t[e]=O(s)}return t[e]})(r,e,l),d=(u=>{const{textDecoration:t}=u;if(void 0===t||"normal"===t)return u;const{decorationColor:e,decorationThickness:n}=u,i=e||u.fill||k.fill,s=n||1;function r(F,t=F){var e,n,r,o;return null!=(e=u.textDecoration)&&e.includes(F)?{[`${t}Color`]:null!=(n=u[`${t}Color`])?n:i,[`${t}Thickness`]:null!=(r=u[`${t}Thickness`])?r:s,[`${t}Offset`]:null!=(o=u[`${t}Offset`])?o:0}:{}}return F({},u,r("underline"),r("overline"),r("line-through","lineThrough"))})(d)),d.fontSize=void 0!==d.fontSize?((u,F)=>{const{value:t,unit:e}=y(u),{value:n,unit:i}=y(F);return i===a.percent?t*(n/100)+e:F})(c,d.fontSize):c;const A=B?e[B]:{};void 0!==A.color&&void 0===A.fill&&(d.fill=d.color),d.color=d.fill,o.push(d.fontSize);const g={style:d,tags:C,children:t.children.map(D)},f=null!=(E=d.imgSrc)?E:"";if(f){if(void 0===n)throw new Error(`An image tag with imgSrc="${f}" was encountered, but no imgMap was provided. Please include a valid Sprite in the imgMap property in the options in your TaggedText constructor.`);const F=n[f];if(void 0===F)throw new Error(`An image tag with imgSrc="${f}" was encountered, but there was no matching sprite in the sprite map. Please include a valid Sprite in the imgMap property in the options in your TaggedText constructor.`);if(F instanceof u.Sprite==0)throw new Error(`The image reference you provided for "${f}" is not a Sprite. The imgMap can only accept PIXI.Sprite instances.`);const t=(F=>new u.Sprite(F.texture))(F);g.children=[t,...g.children]}return r.pop(),o.pop(),g};return D(t)})(((u,F=[],t=!1,n=m)=>{t&&(u=>/\u{1F3F4}\u{E0067}\u{E0062}(?:\u{E0077}\u{E006C}\u{E0073}|\u{E0073}\u{E0063}\u{E0074}|\u{E0065}\u{E006E}\u{E0067})\u{E007F}|(?:\u{1F9D1}\u{1F3FF}\u200D\u2764\uFE0F\u200D(?:\u{1F48B}\u200D)?\u{1F9D1}|\u{1F469}\u{1F3FF}\u200D\u{1F91D}\u200D[\u{1F468}\u{1F469}])[\u{1F3FB}-\u{1F3FE}]|(?:\u{1F9D1}\u{1F3FE}\u200D\u2764\uFE0F\u200D(?:\u{1F48B}\u200D)?\u{1F9D1}|\u{1F469}\u{1F3FE}\u200D\u{1F91D}\u200D[\u{1F468}\u{1F469}])[\u{1F3FB}-\u{1F3FD}\u{1F3FF}]|(?:\u{1F9D1}\u{1F3FD}\u200D\u2764\uFE0F\u200D(?:\u{1F48B}\u200D)?\u{1F9D1}|\u{1F469}\u{1F3FD}\u200D\u{1F91D}\u200D[\u{1F468}\u{1F469}])[\u{1F3FB}\u{1F3FC}\u{1F3FE}\u{1F3FF}]|(?:\u{1F9D1}\u{1F3FC}\u200D\u2764\uFE0F\u200D(?:\u{1F48B}\u200D)?\u{1F9D1}|\u{1F469}\u{1F3FC}\u200D\u{1F91D}\u200D[\u{1F468}\u{1F469}])[\u{1F3FB}\u{1F3FD}-\u{1F3FF}]|(?:\u{1F9D1}\u{1F3FB}\u200D\u2764\uFE0F\u200D(?:\u{1F48B}\u200D)?\u{1F9D1}|\u{1F469}\u{1F3FB}\u200D\u{1F91D}\u200D[\u{1F468}\u{1F469}])[\u{1F3FC}-\u{1F3FF}]|\u{1F468}(?:\u{1F3FB}(?:\u200D(?:\u2764\uFE0F\u200D(?:\u{1F48B}\u200D\u{1F468}[\u{1F3FB}-\u{1F3FF}]|\u{1F468}[\u{1F3FB}-\u{1F3FF}])|\u{1F91D}\u200D\u{1F468}[\u{1F3FC}-\u{1F3FF}]|[\u2695\u2696\u2708]\uFE0F|[\u{1F33E}\u{1F373}\u{1F37C}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9AF}-\u{1F9B3}\u{1F9BC}\u{1F9BD}]))?|[\u{1F3FC}-\u{1F3FF}]\u200D\u2764\uFE0F\u200D(?:\u{1F48B}\u200D\u{1F468}[\u{1F3FB}-\u{1F3FF}]|\u{1F468}[\u{1F3FB}-\u{1F3FF}])|\u200D(?:\u2764\uFE0F\u200D(?:\u{1F48B}\u200D)?\u{1F468}|[\u{1F468}\u{1F469}]\u200D(?:\u{1F466}\u200D\u{1F466}|\u{1F467}\u200D[\u{1F466}\u{1F467}])|\u{1F466}\u200D\u{1F466}|\u{1F467}\u200D[\u{1F466}\u{1F467}]|[\u{1F33E}\u{1F373}\u{1F37C}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9AF}-\u{1F9B3}\u{1F9BC}\u{1F9BD}])|\u{1F3FF}\u200D(?:\u{1F91D}\u200D\u{1F468}[\u{1F3FB}-\u{1F3FE}]|[\u{1F33E}\u{1F373}\u{1F37C}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9AF}-\u{1F9B3}\u{1F9BC}\u{1F9BD}])|\u{1F3FE}\u200D(?:\u{1F91D}\u200D\u{1F468}[\u{1F3FB}-\u{1F3FD}\u{1F3FF}]|[\u{1F33E}\u{1F373}\u{1F37C}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9AF}-\u{1F9B3}\u{1F9BC}\u{1F9BD}])|\u{1F3FD}\u200D(?:\u{1F91D}\u200D\u{1F468}[\u{1F3FB}\u{1F3FC}\u{1F3FE}\u{1F3FF}]|[\u{1F33E}\u{1F373}\u{1F37C}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9AF}-\u{1F9B3}\u{1F9BC}\u{1F9BD}])|\u{1F3FC}\u200D(?:\u{1F91D}\u200D\u{1F468}[\u{1F3FB}\u{1F3FD}-\u{1F3FF}]|[\u{1F33E}\u{1F373}\u{1F37C}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9AF}-\u{1F9B3}\u{1F9BC}\u{1F9BD}])|(?:\u{1F3FF}\u200D[\u2695\u2696\u2708]|\u{1F3FE}\u200D[\u2695\u2696\u2708]|\u{1F3FD}\u200D[\u2695\u2696\u2708]|\u{1F3FC}\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])\uFE0F|\u200D(?:[\u{1F468}\u{1F469}]\u200D[\u{1F466}\u{1F467}]|[\u{1F466}\u{1F467}])|\u{1F3FF}|\u{1F3FE}|\u{1F3FD}|\u{1F3FC})?|(?:\u{1F469}(?:\u{1F3FB}\u200D\u2764\uFE0F\u200D(?:\u{1F48B}\u200D[\u{1F468}\u{1F469}]|[\u{1F468}\u{1F469}])|[\u{1F3FC}-\u{1F3FF}]\u200D\u2764\uFE0F\u200D(?:\u{1F48B}\u200D[\u{1F468}\u{1F469}]|[\u{1F468}\u{1F469}]))|\u{1F9D1}[\u{1F3FB}-\u{1F3FF}]\u200D\u{1F91D}\u200D\u{1F9D1})[\u{1F3FB}-\u{1F3FF}]|\u{1F469}\u200D\u{1F469}\u200D(?:\u{1F466}\u200D\u{1F466}|\u{1F467}\u200D[\u{1F466}\u{1F467}])|\u{1F469}(?:\u200D(?:\u2764\uFE0F\u200D(?:\u{1F48B}\u200D[\u{1F468}\u{1F469}]|[\u{1F468}\u{1F469}])|[\u{1F33E}\u{1F373}\u{1F37C}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9AF}-\u{1F9B3}\u{1F9BC}\u{1F9BD}])|\u{1F3FF}\u200D[\u{1F33E}\u{1F373}\u{1F37C}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9AF}-\u{1F9B3}\u{1F9BC}\u{1F9BD}]|\u{1F3FE}\u200D[\u{1F33E}\u{1F373}\u{1F37C}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9AF}-\u{1F9B3}\u{1F9BC}\u{1F9BD}]|\u{1F3FD}\u200D[\u{1F33E}\u{1F373}\u{1F37C}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9AF}-\u{1F9B3}\u{1F9BC}\u{1F9BD}]|\u{1F3FC}\u200D[\u{1F33E}\u{1F373}\u{1F37C}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9AF}-\u{1F9B3}\u{1F9BC}\u{1F9BD}]|\u{1F3FB}\u200D[\u{1F33E}\u{1F373}\u{1F37C}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9AF}-\u{1F9B3}\u{1F9BC}\u{1F9BD}])|\u{1F9D1}(?:\u200D(?:\u{1F91D}\u200D\u{1F9D1}|[\u{1F33E}\u{1F373}\u{1F37C}\u{1F384}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9AF}-\u{1F9B3}\u{1F9BC}\u{1F9BD}])|\u{1F3FF}\u200D[\u{1F33E}\u{1F373}\u{1F37C}\u{1F384}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9AF}-\u{1F9B3}\u{1F9BC}\u{1F9BD}]|\u{1F3FE}\u200D[\u{1F33E}\u{1F373}\u{1F37C}\u{1F384}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9AF}-\u{1F9B3}\u{1F9BC}\u{1F9BD}]|\u{1F3FD}\u200D[\u{1F33E}\u{1F373}\u{1F37C}\u{1F384}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9AF}-\u{1F9B3}\u{1F9BC}\u{1F9BD}]|\u{1F3FC}\u200D[\u{1F33E}\u{1F373}\u{1F37C}\u{1F384}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9AF}-\u{1F9B3}\u{1F9BC}\u{1F9BD}]|\u{1F3FB}\u200D[\u{1F33E}\u{1F373}\u{1F37C}\u{1F384}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9AF}-\u{1F9B3}\u{1F9BC}\u{1F9BD}])|\u{1F469}\u200D\u{1F466}\u200D\u{1F466}|\u{1F469}\u200D\u{1F469}\u200D[\u{1F466}\u{1F467}]|\u{1F469}\u200D\u{1F467}\u200D[\u{1F466}\u{1F467}]|(?:\u{1F441}\uFE0F\u200D\u{1F5E8}|\u{1F9D1}(?:\u{1F3FF}\u200D[\u2695\u2696\u2708]|\u{1F3FE}\u200D[\u2695\u2696\u2708]|\u{1F3FD}\u200D[\u2695\u2696\u2708]|\u{1F3FC}\u200D[\u2695\u2696\u2708]|\u{1F3FB}\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\u{1F469}(?:\u{1F3FF}\u200D[\u2695\u2696\u2708]|\u{1F3FE}\u200D[\u2695\u2696\u2708]|\u{1F3FD}\u200D[\u2695\u2696\u2708]|\u{1F3FC}\u200D[\u2695\u2696\u2708]|\u{1F3FB}\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\u{1F636}\u200D\u{1F32B}|\u{1F3F3}\uFE0F\u200D\u26A7|\u{1F43B}\u200D\u2744|(?:[\u{1F3C3}\u{1F3C4}\u{1F3CA}\u{1F46E}\u{1F470}\u{1F471}\u{1F473}\u{1F477}\u{1F481}\u{1F482}\u{1F486}\u{1F487}\u{1F645}-\u{1F647}\u{1F64B}\u{1F64D}\u{1F64E}\u{1F6A3}\u{1F6B4}-\u{1F6B6}\u{1F926}\u{1F935}\u{1F937}-\u{1F939}\u{1F93D}\u{1F93E}\u{1F9B8}\u{1F9B9}\u{1F9CD}-\u{1F9CF}\u{1F9D4}\u{1F9D6}-\u{1F9DD}][\u{1F3FB}-\u{1F3FF}]|[\u{1F46F}\u{1F93C}\u{1F9DE}\u{1F9DF}])\u200D[\u2640\u2642]|[\u26F9\u{1F3CB}\u{1F3CC}\u{1F575}][\uFE0F\u{1F3FB}-\u{1F3FF}]\u200D[\u2640\u2642]|\u{1F3F4}\u200D\u2620|[\u{1F3C3}\u{1F3C4}\u{1F3CA}\u{1F46E}\u{1F470}\u{1F471}\u{1F473}\u{1F477}\u{1F481}\u{1F482}\u{1F486}\u{1F487}\u{1F645}-\u{1F647}\u{1F64B}\u{1F64D}\u{1F64E}\u{1F6A3}\u{1F6B4}-\u{1F6B6}\u{1F926}\u{1F935}\u{1F937}-\u{1F939}\u{1F93D}\u{1F93E}\u{1F9B8}\u{1F9B9}\u{1F9CD}-\u{1F9CF}\u{1F9D4}\u{1F9D6}-\u{1F9DD}]\u200D[\u2640\u2642]|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u2600-\u2604\u260E\u2611\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26B0\u26B1\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0\u26F1\u26F4\u26F7\u26F8\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u3030\u303D\u3297\u3299\u{1F170}\u{1F171}\u{1F17E}\u{1F17F}\u{1F202}\u{1F237}\u{1F321}\u{1F324}-\u{1F32C}\u{1F336}\u{1F37D}\u{1F396}\u{1F397}\u{1F399}-\u{1F39B}\u{1F39E}\u{1F39F}\u{1F3CD}\u{1F3CE}\u{1F3D4}-\u{1F3DF}\u{1F3F5}\u{1F3F7}\u{1F43F}\u{1F4FD}\u{1F549}\u{1F54A}\u{1F56F}\u{1F570}\u{1F573}\u{1F576}-\u{1F579}\u{1F587}\u{1F58A}-\u{1F58D}\u{1F5A5}\u{1F5A8}\u{1F5B1}\u{1F5B2}\u{1F5BC}\u{1F5C2}-\u{1F5C4}\u{1F5D1}-\u{1F5D3}\u{1F5DC}-\u{1F5DE}\u{1F5E1}\u{1F5E3}\u{1F5E8}\u{1F5EF}\u{1F5F3}\u{1F5FA}\u{1F6CB}\u{1F6CD}-\u{1F6CF}\u{1F6E0}-\u{1F6E5}\u{1F6E9}\u{1F6F0}\u{1F6F3}])\uFE0F|\u{1F3F3}\uFE0F\u200D\u{1F308}|\u{1F469}\u200D\u{1F467}|\u{1F469}\u200D\u{1F466}|\u{1F635}\u200D\u{1F4AB}|\u{1F62E}\u200D\u{1F4A8}|\u{1F415}\u200D\u{1F9BA}|\u{1F9D1}(?:\u{1F3FF}|\u{1F3FE}|\u{1F3FD}|\u{1F3FC}|\u{1F3FB})?|\u{1F469}(?:\u{1F3FF}|\u{1F3FE}|\u{1F3FD}|\u{1F3FC}|\u{1F3FB})?|\u{1F1FD}\u{1F1F0}|\u{1F1F6}\u{1F1E6}|\u{1F1F4}\u{1F1F2}|\u{1F408}\u200D\u2B1B|\u2764\uFE0F\u200D[\u{1F525}\u{1FA79}]|\u{1F441}\uFE0F|\u{1F3F3}\uFE0F|\u{1F1FF}[\u{1F1E6}\u{1F1F2}\u{1F1FC}]|\u{1F1FE}[\u{1F1EA}\u{1F1F9}]|\u{1F1FC}[\u{1F1EB}\u{1F1F8}]|\u{1F1FB}[\u{1F1E6}\u{1F1E8}\u{1F1EA}\u{1F1EC}\u{1F1EE}\u{1F1F3}\u{1F1FA}]|\u{1F1FA}[\u{1F1E6}\u{1F1EC}\u{1F1F2}\u{1F1F3}\u{1F1F8}\u{1F1FE}\u{1F1FF}]|\u{1F1F9}[\u{1F1E6}\u{1F1E8}\u{1F1E9}\u{1F1EB}-\u{1F1ED}\u{1F1EF}-\u{1F1F4}\u{1F1F7}\u{1F1F9}\u{1F1FB}\u{1F1FC}\u{1F1FF}]|\u{1F1F8}[\u{1F1E6}-\u{1F1EA}\u{1F1EC}-\u{1F1F4}\u{1F1F7}-\u{1F1F9}\u{1F1FB}\u{1F1FD}-\u{1F1FF}]|\u{1F1F7}[\u{1F1EA}\u{1F1F4}\u{1F1F8}\u{1F1FA}\u{1F1FC}]|\u{1F1F5}[\u{1F1E6}\u{1F1EA}-\u{1F1ED}\u{1F1F0}-\u{1F1F3}\u{1F1F7}-\u{1F1F9}\u{1F1FC}\u{1F1FE}]|\u{1F1F3}[\u{1F1E6}\u{1F1E8}\u{1F1EA}-\u{1F1EC}\u{1F1EE}\u{1F1F1}\u{1F1F4}\u{1F1F5}\u{1F1F7}\u{1F1FA}\u{1F1FF}]|\u{1F1F2}[\u{1F1E6}\u{1F1E8}-\u{1F1ED}\u{1F1F0}-\u{1F1FF}]|\u{1F1F1}[\u{1F1E6}-\u{1F1E8}\u{1F1EE}\u{1F1F0}\u{1F1F7}-\u{1F1FB}\u{1F1FE}]|\u{1F1F0}[\u{1F1EA}\u{1F1EC}-\u{1F1EE}\u{1F1F2}\u{1F1F3}\u{1F1F5}\u{1F1F7}\u{1F1FC}\u{1F1FE}\u{1F1FF}]|\u{1F1EF}[\u{1F1EA}\u{1F1F2}\u{1F1F4}\u{1F1F5}]|\u{1F1EE}[\u{1F1E8}-\u{1F1EA}\u{1F1F1}-\u{1F1F4}\u{1F1F6}-\u{1F1F9}]|\u{1F1ED}[\u{1F1F0}\u{1F1F2}\u{1F1F3}\u{1F1F7}\u{1F1F9}\u{1F1FA}]|\u{1F1EC}[\u{1F1E6}\u{1F1E7}\u{1F1E9}-\u{1F1EE}\u{1F1F1}-\u{1F1F3}\u{1F1F5}-\u{1F1FA}\u{1F1FC}\u{1F1FE}]|\u{1F1EB}[\u{1F1EE}-\u{1F1F0}\u{1F1F2}\u{1F1F4}\u{1F1F7}]|\u{1F1EA}[\u{1F1E6}\u{1F1E8}\u{1F1EA}\u{1F1EC}\u{1F1ED}\u{1F1F7}-\u{1F1FA}]|\u{1F1E9}[\u{1F1EA}\u{1F1EC}\u{1F1EF}\u{1F1F0}\u{1F1F2}\u{1F1F4}\u{1F1FF}]|\u{1F1E8}[\u{1F1E6}\u{1F1E8}\u{1F1E9}\u{1F1EB}-\u{1F1EE}\u{1F1F0}-\u{1F1F5}\u{1F1F7}\u{1F1FA}-\u{1F1FF}]|\u{1F1E7}[\u{1F1E6}\u{1F1E7}\u{1F1E9}-\u{1F1EF}\u{1F1F1}-\u{1F1F4}\u{1F1F6}-\u{1F1F9}\u{1F1FB}\u{1F1FC}\u{1F1FE}\u{1F1FF}]|\u{1F1E6}[\u{1F1E8}-\u{1F1EC}\u{1F1EE}\u{1F1F1}\u{1F1F2}\u{1F1F4}\u{1F1F6}-\u{1F1FA}\u{1F1FC}\u{1F1FD}\u{1F1FF}]|[#\*0-9]\uFE0F\u20E3|\u2764\uFE0F|[\u{1F3C3}\u{1F3C4}\u{1F3CA}\u{1F46E}\u{1F470}\u{1F471}\u{1F473}\u{1F477}\u{1F481}\u{1F482}\u{1F486}\u{1F487}\u{1F645}-\u{1F647}\u{1F64B}\u{1F64D}\u{1F64E}\u{1F6A3}\u{1F6B4}-\u{1F6B6}\u{1F926}\u{1F935}\u{1F937}-\u{1F939}\u{1F93D}\u{1F93E}\u{1F9B8}\u{1F9B9}\u{1F9CD}-\u{1F9CF}\u{1F9D4}\u{1F9D6}-\u{1F9DD}][\u{1F3FB}-\u{1F3FF}]|[\u26F9\u{1F3CB}\u{1F3CC}\u{1F575}][\uFE0F\u{1F3FB}-\u{1F3FF}]|\u{1F3F4}|[\u270A\u270B\u{1F385}\u{1F3C2}\u{1F3C7}\u{1F442}\u{1F443}\u{1F446}-\u{1F450}\u{1F466}\u{1F467}\u{1F46B}-\u{1F46D}\u{1F472}\u{1F474}-\u{1F476}\u{1F478}\u{1F47C}\u{1F483}\u{1F485}\u{1F48F}\u{1F491}\u{1F4AA}\u{1F57A}\u{1F595}\u{1F596}\u{1F64C}\u{1F64F}\u{1F6C0}\u{1F6CC}\u{1F90C}\u{1F90F}\u{1F918}-\u{1F91C}\u{1F91E}\u{1F91F}\u{1F930}-\u{1F934}\u{1F936}\u{1F977}\u{1F9B5}\u{1F9B6}\u{1F9BB}\u{1F9D2}\u{1F9D3}\u{1F9D5}][\u{1F3FB}-\u{1F3FF}]|[\u261D\u270C\u270D\u{1F574}\u{1F590}][\uFE0F\u{1F3FB}-\u{1F3FF}]|[\u270A\u270B\u{1F385}\u{1F3C2}\u{1F3C7}\u{1F408}\u{1F415}\u{1F43B}\u{1F442}\u{1F443}\u{1F446}-\u{1F450}\u{1F466}\u{1F467}\u{1F46B}-\u{1F46D}\u{1F472}\u{1F474}-\u{1F476}\u{1F478}\u{1F47C}\u{1F483}\u{1F485}\u{1F48F}\u{1F491}\u{1F4AA}\u{1F57A}\u{1F595}\u{1F596}\u{1F62E}\u{1F635}\u{1F636}\u{1F64C}\u{1F64F}\u{1F6C0}\u{1F6CC}\u{1F90C}\u{1F90F}\u{1F918}-\u{1F91C}\u{1F91E}\u{1F91F}\u{1F930}-\u{1F934}\u{1F936}\u{1F977}\u{1F9B5}\u{1F9B6}\u{1F9BB}\u{1F9D2}\u{1F9D3}\u{1F9D5}]|[\u{1F3C3}\u{1F3C4}\u{1F3CA}\u{1F46E}\u{1F470}\u{1F471}\u{1F473}\u{1F477}\u{1F481}\u{1F482}\u{1F486}\u{1F487}\u{1F645}-\u{1F647}\u{1F64B}\u{1F64D}\u{1F64E}\u{1F6A3}\u{1F6B4}-\u{1F6B6}\u{1F926}\u{1F935}\u{1F937}-\u{1F939}\u{1F93D}\u{1F93E}\u{1F9B8}\u{1F9B9}\u{1F9CD}-\u{1F9CF}\u{1F9D4}\u{1F9D6}-\u{1F9DD}]|[\u{1F46F}\u{1F93C}\u{1F9DE}\u{1F9DF}]|[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55\u{1F004}\u{1F0CF}\u{1F18E}\u{1F191}-\u{1F19A}\u{1F201}\u{1F21A}\u{1F22F}\u{1F232}-\u{1F236}\u{1F238}-\u{1F23A}\u{1F250}\u{1F251}\u{1F300}-\u{1F320}\u{1F32D}-\u{1F335}\u{1F337}-\u{1F37C}\u{1F37E}-\u{1F384}\u{1F386}-\u{1F393}\u{1F3A0}-\u{1F3C1}\u{1F3C5}\u{1F3C6}\u{1F3C8}\u{1F3C9}\u{1F3CF}-\u{1F3D3}\u{1F3E0}-\u{1F3F0}\u{1F3F8}-\u{1F407}\u{1F409}-\u{1F414}\u{1F416}-\u{1F43A}\u{1F43C}-\u{1F43E}\u{1F440}\u{1F444}\u{1F445}\u{1F451}-\u{1F465}\u{1F46A}\u{1F479}-\u{1F47B}\u{1F47D}-\u{1F480}\u{1F484}\u{1F488}-\u{1F48E}\u{1F490}\u{1F492}-\u{1F4A9}\u{1F4AB}-\u{1F4FC}\u{1F4FF}-\u{1F53D}\u{1F54B}-\u{1F54E}\u{1F550}-\u{1F567}\u{1F5A4}\u{1F5FB}-\u{1F62D}\u{1F62F}-\u{1F634}\u{1F637}-\u{1F644}\u{1F648}-\u{1F64A}\u{1F680}-\u{1F6A2}\u{1F6A4}-\u{1F6B3}\u{1F6B7}-\u{1F6BF}\u{1F6C1}-\u{1F6C5}\u{1F6D0}-\u{1F6D2}\u{1F6D5}-\u{1F6D7}\u{1F6EB}\u{1F6EC}\u{1F6F4}-\u{1F6FC}\u{1F7E0}-\u{1F7EB}\u{1F90D}\u{1F90E}\u{1F910}-\u{1F917}\u{1F91D}\u{1F920}-\u{1F925}\u{1F927}-\u{1F92F}\u{1F93A}\u{1F93F}-\u{1F945}\u{1F947}-\u{1F976}\u{1F978}\u{1F97A}-\u{1F9B4}\u{1F9B7}\u{1F9BA}\u{1F9BC}-\u{1F9CB}\u{1F9D0}\u{1F9E0}-\u{1F9FF}\u{1FA70}-\u{1FA74}\u{1FA78}-\u{1FA7A}\u{1FA80}-\u{1FA86}\u{1FA90}-\u{1FAA8}\u{1FAB0}-\u{1FAB6}\u{1FAC0}-\u{1FAC2}\u{1FAD0}-\u{1FAD6}]/gu.test(u))(u)&&(u=(u=>{const F=new RegExp(`((<|</)[^>]*)?(${/\u{1F3F4}\u{E0067}\u{E0062}(?:\u{E0077}\u{E006C}\u{E0073}|\u{E0073}\u{E0063}\u{E0074}|\u{E0065}\u{E006E}\u{E0067})\u{E007F}|(?:\u{1F9D1}\u{1F3FF}\u200D\u2764\uFE0F\u200D(?:\u{1F48B}\u200D)?\u{1F9D1}|\u{1F469}\u{1F3FF}\u200D\u{1F91D}\u200D[\u{1F468}\u{1F469}])[\u{1F3FB}-\u{1F3FE}]|(?:\u{1F9D1}\u{1F3FE}\u200D\u2764\uFE0F\u200D(?:\u{1F48B}\u200D)?\u{1F9D1}|\u{1F469}\u{1F3FE}\u200D\u{1F91D}\u200D[\u{1F468}\u{1F469}])[\u{1F3FB}-\u{1F3FD}\u{1F3FF}]|(?:\u{1F9D1}\u{1F3FD}\u200D\u2764\uFE0F\u200D(?:\u{1F48B}\u200D)?\u{1F9D1}|\u{1F469}\u{1F3FD}\u200D\u{1F91D}\u200D[\u{1F468}\u{1F469}])[\u{1F3FB}\u{1F3FC}\u{1F3FE}\u{1F3FF}]|(?:\u{1F9D1}\u{1F3FC}\u200D\u2764\uFE0F\u200D(?:\u{1F48B}\u200D)?\u{1F9D1}|\u{1F469}\u{1F3FC}\u200D\u{1F91D}\u200D[\u{1F468}\u{1F469}])[\u{1F3FB}\u{1F3FD}-\u{1F3FF}]|(?:\u{1F9D1}\u{1F3FB}\u200D\u2764\uFE0F\u200D(?:\u{1F48B}\u200D)?\u{1F9D1}|\u{1F469}\u{1F3FB}\u200D\u{1F91D}\u200D[\u{1F468}\u{1F469}])[\u{1F3FC}-\u{1F3FF}]|\u{1F468}(?:\u{1F3FB}(?:\u200D(?:\u2764\uFE0F\u200D(?:\u{1F48B}\u200D\u{1F468}[\u{1F3FB}-\u{1F3FF}]|\u{1F468}[\u{1F3FB}-\u{1F3FF}])|\u{1F91D}\u200D\u{1F468}[\u{1F3FC}-\u{1F3FF}]|[\u2695\u2696\u2708]\uFE0F|[\u{1F33E}\u{1F373}\u{1F37C}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9AF}-\u{1F9B3}\u{1F9BC}\u{1F9BD}]))?|[\u{1F3FC}-\u{1F3FF}]\u200D\u2764\uFE0F\u200D(?:\u{1F48B}\u200D\u{1F468}[\u{1F3FB}-\u{1F3FF}]|\u{1F468}[\u{1F3FB}-\u{1F3FF}])|\u200D(?:\u2764\uFE0F\u200D(?:\u{1F48B}\u200D)?\u{1F468}|[\u{1F468}\u{1F469}]\u200D(?:\u{1F466}\u200D\u{1F466}|\u{1F467}\u200D[\u{1F466}\u{1F467}])|\u{1F466}\u200D\u{1F466}|\u{1F467}\u200D[\u{1F466}\u{1F467}]|[\u{1F33E}\u{1F373}\u{1F37C}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9AF}-\u{1F9B3}\u{1F9BC}\u{1F9BD}])|\u{1F3FF}\u200D(?:\u{1F91D}\u200D\u{1F468}[\u{1F3FB}-\u{1F3FE}]|[\u{1F33E}\u{1F373}\u{1F37C}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9AF}-\u{1F9B3}\u{1F9BC}\u{1F9BD}])|\u{1F3FE}\u200D(?:\u{1F91D}\u200D\u{1F468}[\u{1F3FB}-\u{1F3FD}\u{1F3FF}]|[\u{1F33E}\u{1F373}\u{1F37C}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9AF}-\u{1F9B3}\u{1F9BC}\u{1F9BD}])|\u{1F3FD}\u200D(?:\u{1F91D}\u200D\u{1F468}[\u{1F3FB}\u{1F3FC}\u{1F3FE}\u{1F3FF}]|[\u{1F33E}\u{1F373}\u{1F37C}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9AF}-\u{1F9B3}\u{1F9BC}\u{1F9BD}])|\u{1F3FC}\u200D(?:\u{1F91D}\u200D\u{1F468}[\u{1F3FB}\u{1F3FD}-\u{1F3FF}]|[\u{1F33E}\u{1F373}\u{1F37C}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9AF}-\u{1F9B3}\u{1F9BC}\u{1F9BD}])|(?:\u{1F3FF}\u200D[\u2695\u2696\u2708]|\u{1F3FE}\u200D[\u2695\u2696\u2708]|\u{1F3FD}\u200D[\u2695\u2696\u2708]|\u{1F3FC}\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])\uFE0F|\u200D(?:[\u{1F468}\u{1F469}]\u200D[\u{1F466}\u{1F467}]|[\u{1F466}\u{1F467}])|\u{1F3FF}|\u{1F3FE}|\u{1F3FD}|\u{1F3FC})?|(?:\u{1F469}(?:\u{1F3FB}\u200D\u2764\uFE0F\u200D(?:\u{1F48B}\u200D[\u{1F468}\u{1F469}]|[\u{1F468}\u{1F469}])|[\u{1F3FC}-\u{1F3FF}]\u200D\u2764\uFE0F\u200D(?:\u{1F48B}\u200D[\u{1F468}\u{1F469}]|[\u{1F468}\u{1F469}]))|\u{1F9D1}[\u{1F3FB}-\u{1F3FF}]\u200D\u{1F91D}\u200D\u{1F9D1})[\u{1F3FB}-\u{1F3FF}]|\u{1F469}\u200D\u{1F469}\u200D(?:\u{1F466}\u200D\u{1F466}|\u{1F467}\u200D[\u{1F466}\u{1F467}])|\u{1F469}(?:\u200D(?:\u2764\uFE0F\u200D(?:\u{1F48B}\u200D[\u{1F468}\u{1F469}]|[\u{1F468}\u{1F469}])|[\u{1F33E}\u{1F373}\u{1F37C}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9AF}-\u{1F9B3}\u{1F9BC}\u{1F9BD}])|\u{1F3FF}\u200D[\u{1F33E}\u{1F373}\u{1F37C}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9AF}-\u{1F9B3}\u{1F9BC}\u{1F9BD}]|\u{1F3FE}\u200D[\u{1F33E}\u{1F373}\u{1F37C}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9AF}-\u{1F9B3}\u{1F9BC}\u{1F9BD}]|\u{1F3FD}\u200D[\u{1F33E}\u{1F373}\u{1F37C}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9AF}-\u{1F9B3}\u{1F9BC}\u{1F9BD}]|\u{1F3FC}\u200D[\u{1F33E}\u{1F373}\u{1F37C}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9AF}-\u{1F9B3}\u{1F9BC}\u{1F9BD}]|\u{1F3FB}\u200D[\u{1F33E}\u{1F373}\u{1F37C}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9AF}-\u{1F9B3}\u{1F9BC}\u{1F9BD}])|\u{1F9D1}(?:\u200D(?:\u{1F91D}\u200D\u{1F9D1}|[\u{1F33E}\u{1F373}\u{1F37C}\u{1F384}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9AF}-\u{1F9B3}\u{1F9BC}\u{1F9BD}])|\u{1F3FF}\u200D[\u{1F33E}\u{1F373}\u{1F37C}\u{1F384}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9AF}-\u{1F9B3}\u{1F9BC}\u{1F9BD}]|\u{1F3FE}\u200D[\u{1F33E}\u{1F373}\u{1F37C}\u{1F384}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9AF}-\u{1F9B3}\u{1F9BC}\u{1F9BD}]|\u{1F3FD}\u200D[\u{1F33E}\u{1F373}\u{1F37C}\u{1F384}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9AF}-\u{1F9B3}\u{1F9BC}\u{1F9BD}]|\u{1F3FC}\u200D[\u{1F33E}\u{1F373}\u{1F37C}\u{1F384}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9AF}-\u{1F9B3}\u{1F9BC}\u{1F9BD}]|\u{1F3FB}\u200D[\u{1F33E}\u{1F373}\u{1F37C}\u{1F384}\u{1F393}\u{1F3A4}\u{1F3A8}\u{1F3EB}\u{1F3ED}\u{1F4BB}\u{1F4BC}\u{1F527}\u{1F52C}\u{1F680}\u{1F692}\u{1F9AF}-\u{1F9B3}\u{1F9BC}\u{1F9BD}])|\u{1F469}\u200D\u{1F466}\u200D\u{1F466}|\u{1F469}\u200D\u{1F469}\u200D[\u{1F466}\u{1F467}]|\u{1F469}\u200D\u{1F467}\u200D[\u{1F466}\u{1F467}]|(?:\u{1F441}\uFE0F\u200D\u{1F5E8}|\u{1F9D1}(?:\u{1F3FF}\u200D[\u2695\u2696\u2708]|\u{1F3FE}\u200D[\u2695\u2696\u2708]|\u{1F3FD}\u200D[\u2695\u2696\u2708]|\u{1F3FC}\u200D[\u2695\u2696\u2708]|\u{1F3FB}\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\u{1F469}(?:\u{1F3FF}\u200D[\u2695\u2696\u2708]|\u{1F3FE}\u200D[\u2695\u2696\u2708]|\u{1F3FD}\u200D[\u2695\u2696\u2708]|\u{1F3FC}\u200D[\u2695\u2696\u2708]|\u{1F3FB}\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\u{1F636}\u200D\u{1F32B}|\u{1F3F3}\uFE0F\u200D\u26A7|\u{1F43B}\u200D\u2744|(?:[\u{1F3C3}\u{1F3C4}\u{1F3CA}\u{1F46E}\u{1F470}\u{1F471}\u{1F473}\u{1F477}\u{1F481}\u{1F482}\u{1F486}\u{1F487}\u{1F645}-\u{1F647}\u{1F64B}\u{1F64D}\u{1F64E}\u{1F6A3}\u{1F6B4}-\u{1F6B6}\u{1F926}\u{1F935}\u{1F937}-\u{1F939}\u{1F93D}\u{1F93E}\u{1F9B8}\u{1F9B9}\u{1F9CD}-\u{1F9CF}\u{1F9D4}\u{1F9D6}-\u{1F9DD}][\u{1F3FB}-\u{1F3FF}]|[\u{1F46F}\u{1F93C}\u{1F9DE}\u{1F9DF}])\u200D[\u2640\u2642]|[\u26F9\u{1F3CB}\u{1F3CC}\u{1F575}][\uFE0F\u{1F3FB}-\u{1F3FF}]\u200D[\u2640\u2642]|\u{1F3F4}\u200D\u2620|[\u{1F3C3}\u{1F3C4}\u{1F3CA}\u{1F46E}\u{1F470}\u{1F471}\u{1F473}\u{1F477}\u{1F481}\u{1F482}\u{1F486}\u{1F487}\u{1F645}-\u{1F647}\u{1F64B}\u{1F64D}\u{1F64E}\u{1F6A3}\u{1F6B4}-\u{1F6B6}\u{1F926}\u{1F935}\u{1F937}-\u{1F939}\u{1F93D}\u{1F93E}\u{1F9B8}\u{1F9B9}\u{1F9CD}-\u{1F9CF}\u{1F9D4}\u{1F9D6}-\u{1F9DD}]\u200D[\u2640\u2642]|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u2600-\u2604\u260E\u2611\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26B0\u26B1\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0\u26F1\u26F4\u26F7\u26F8\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u3030\u303D\u3297\u3299\u{1F170}\u{1F171}\u{1F17E}\u{1F17F}\u{1F202}\u{1F237}\u{1F321}\u{1F324}-\u{1F32C}\u{1F336}\u{1F37D}\u{1F396}\u{1F397}\u{1F399}-\u{1F39B}\u{1F39E}\u{1F39F}\u{1F3CD}\u{1F3CE}\u{1F3D4}-\u{1F3DF}\u{1F3F5}\u{1F3F7}\u{1F43F}\u{1F4FD}\u{1F549}\u{1F54A}\u{1F56F}\u{1F570}\u{1F573}\u{1F576}-\u{1F579}\u{1F587}\u{1F58A}-\u{1F58D}\u{1F5A5}\u{1F5A8}\u{1F5B1}\u{1F5B2}\u{1F5BC}\u{1F5C2}-\u{1F5C4}\u{1F5D1}-\u{1F5D3}\u{1F5DC}-\u{1F5DE}\u{1F5E1}\u{1F5E3}\u{1F5E8}\u{1F5EF}\u{1F5F3}\u{1F5FA}\u{1F6CB}\u{1F6CD}-\u{1F6CF}\u{1F6E0}-\u{1F6E5}\u{1F6E9}\u{1F6F0}\u{1F6F3}])\uFE0F|\u{1F3F3}\uFE0F\u200D\u{1F308}|\u{1F469}\u200D\u{1F467}|\u{1F469}\u200D\u{1F466}|\u{1F635}\u200D\u{1F4AB}|\u{1F62E}\u200D\u{1F4A8}|\u{1F415}\u200D\u{1F9BA}|\u{1F9D1}(?:\u{1F3FF}|\u{1F3FE}|\u{1F3FD}|\u{1F3FC}|\u{1F3FB})?|\u{1F469}(?:\u{1F3FF}|\u{1F3FE}|\u{1F3FD}|\u{1F3FC}|\u{1F3FB})?|\u{1F1FD}\u{1F1F0}|\u{1F1F6}\u{1F1E6}|\u{1F1F4}\u{1F1F2}|\u{1F408}\u200D\u2B1B|\u2764\uFE0F\u200D[\u{1F525}\u{1FA79}]|\u{1F441}\uFE0F|\u{1F3F3}\uFE0F|\u{1F1FF}[\u{1F1E6}\u{1F1F2}\u{1F1FC}]|\u{1F1FE}[\u{1F1EA}\u{1F1F9}]|\u{1F1FC}[\u{1F1EB}\u{1F1F8}]|\u{1F1FB}[\u{1F1E6}\u{1F1E8}\u{1F1EA}\u{1F1EC}\u{1F1EE}\u{1F1F3}\u{1F1FA}]|\u{1F1FA}[\u{1F1E6}\u{1F1EC}\u{1F1F2}\u{1F1F3}\u{1F1F8}\u{1F1FE}\u{1F1FF}]|\u{1F1F9}[\u{1F1E6}\u{1F1E8}\u{1F1E9}\u{1F1EB}-\u{1F1ED}\u{1F1EF}-\u{1F1F4}\u{1F1F7}\u{1F1F9}\u{1F1FB}\u{1F1FC}\u{1F1FF}]|\u{1F1F8}[\u{1F1E6}-\u{1F1EA}\u{1F1EC}-\u{1F1F4}\u{1F1F7}-\u{1F1F9}\u{1F1FB}\u{1F1FD}-\u{1F1FF}]|\u{1F1F7}[\u{1F1EA}\u{1F1F4}\u{1F1F8}\u{1F1FA}\u{1F1FC}]|\u{1F1F5}[\u{1F1E6}\u{1F1EA}-\u{1F1ED}\u{1F1F0}-\u{1F1F3}\u{1F1F7}-\u{1F1F9}\u{1F1FC}\u{1F1FE}]|\u{1F1F3}[\u{1F1E6}\u{1F1E8}\u{1F1EA}-\u{1F1EC}\u{1F1EE}\u{1F1F1}\u{1F1F4}\u{1F1F5}\u{1F1F7}\u{1F1FA}\u{1F1FF}]|\u{1F1F2}[\u{1F1E6}\u{1F1E8}-\u{1F1ED}\u{1F1F0}-\u{1F1FF}]|\u{1F1F1}[\u{1F1E6}-\u{1F1E8}\u{1F1EE}\u{1F1F0}\u{1F1F7}-\u{1F1FB}\u{1F1FE}]|\u{1F1F0}[\u{1F1EA}\u{1F1EC}-\u{1F1EE}\u{1F1F2}\u{1F1F3}\u{1F1F5}\u{1F1F7}\u{1F1FC}\u{1F1FE}\u{1F1FF}]|\u{1F1EF}[\u{1F1EA}\u{1F1F2}\u{1F1F4}\u{1F1F5}]|\u{1F1EE}[\u{1F1E8}-\u{1F1EA}\u{1F1F1}-\u{1F1F4}\u{1F1F6}-\u{1F1F9}]|\u{1F1ED}[\u{1F1F0}\u{1F1F2}\u{1F1F3}\u{1F1F7}\u{1F1F9}\u{1F1FA}]|\u{1F1EC}[\u{1F1E6}\u{1F1E7}\u{1F1E9}-\u{1F1EE}\u{1F1F1}-\u{1F1F3}\u{1F1F5}-\u{1F1FA}\u{1F1FC}\u{1F1FE}]|\u{1F1EB}[\u{1F1EE}-\u{1F1F0}\u{1F1F2}\u{1F1F4}\u{1F1F7}]|\u{1F1EA}[\u{1F1E6}\u{1F1E8}\u{1F1EA}\u{1F1EC}\u{1F1ED}\u{1F1F7}-\u{1F1FA}]|\u{1F1E9}[\u{1F1EA}\u{1F1EC}\u{1F1EF}\u{1F1F0}\u{1F1F2}\u{1F1F4}\u{1F1FF}]|\u{1F1E8}[\u{1F1E6}\u{1F1E8}\u{1F1E9}\u{1F1EB}-\u{1F1EE}\u{1F1F0}-\u{1F1F5}\u{1F1F7}\u{1F1FA}-\u{1F1FF}]|\u{1F1E7}[\u{1F1E6}\u{1F1E7}\u{1F1E9}-\u{1F1EF}\u{1F1F1}-\u{1F1F4}\u{1F1F6}-\u{1F1F9}\u{1F1FB}\u{1F1FC}\u{1F1FE}\u{1F1FF}]|\u{1F1E6}[\u{1F1E8}-\u{1F1EC}\u{1F1EE}\u{1F1F1}\u{1F1F2}\u{1F1F4}\u{1F1F6}-\u{1F1FA}\u{1F1FC}\u{1F1FD}\u{1F1FF}]|[#\*0-9]\uFE0F\u20E3|\u2764\uFE0F|[\u{1F3C3}\u{1F3C4}\u{1F3CA}\u{1F46E}\u{1F470}\u{1F471}\u{1F473}\u{1F477}\u{1F481}\u{1F482}\u{1F486}\u{1F487}\u{1F645}-\u{1F647}\u{1F64B}\u{1F64D}\u{1F64E}\u{1F6A3}\u{1F6B4}-\u{1F6B6}\u{1F926}\u{1F935}\u{1F937}-\u{1F939}\u{1F93D}\u{1F93E}\u{1F9B8}\u{1F9B9}\u{1F9CD}-\u{1F9CF}\u{1F9D4}\u{1F9D6}-\u{1F9DD}][\u{1F3FB}-\u{1F3FF}]|[\u26F9\u{1F3CB}\u{1F3CC}\u{1F575}][\uFE0F\u{1F3FB}-\u{1F3FF}]|\u{1F3F4}|[\u270A\u270B\u{1F385}\u{1F3C2}\u{1F3C7}\u{1F442}\u{1F443}\u{1F446}-\u{1F450}\u{1F466}\u{1F467}\u{1F46B}-\u{1F46D}\u{1F472}\u{1F474}-\u{1F476}\u{1F478}\u{1F47C}\u{1F483}\u{1F485}\u{1F48F}\u{1F491}\u{1F4AA}\u{1F57A}\u{1F595}\u{1F596}\u{1F64C}\u{1F64F}\u{1F6C0}\u{1F6CC}\u{1F90C}\u{1F90F}\u{1F918}-\u{1F91C}\u{1F91E}\u{1F91F}\u{1F930}-\u{1F934}\u{1F936}\u{1F977}\u{1F9B5}\u{1F9B6}\u{1F9BB}\u{1F9D2}\u{1F9D3}\u{1F9D5}][\u{1F3FB}-\u{1F3FF}]|[\u261D\u270C\u270D\u{1F574}\u{1F590}][\uFE0F\u{1F3FB}-\u{1F3FF}]|[\u270A\u270B\u{1F385}\u{1F3C2}\u{1F3C7}\u{1F408}\u{1F415}\u{1F43B}\u{1F442}\u{1F443}\u{1F446}-\u{1F450}\u{1F466}\u{1F467}\u{1F46B}-\u{1F46D}\u{1F472}\u{1F474}-\u{1F476}\u{1F478}\u{1F47C}\u{1F483}\u{1F485}\u{1F48F}\u{1F491}\u{1F4AA}\u{1F57A}\u{1F595}\u{1F596}\u{1F62E}\u{1F635}\u{1F636}\u{1F64C}\u{1F64F}\u{1F6C0}\u{1F6CC}\u{1F90C}\u{1F90F}\u{1F918}-\u{1F91C}\u{1F91E}\u{1F91F}\u{1F930}-\u{1F934}\u{1F936}\u{1F977}\u{1F9B5}\u{1F9B6}\u{1F9BB}\u{1F9D2}\u{1F9D3}\u{1F9D5}]|[\u{1F3C3}\u{1F3C4}\u{1F3CA}\u{1F46E}\u{1F470}\u{1F471}\u{1F473}\u{1F477}\u{1F481}\u{1F482}\u{1F486}\u{1F487}\u{1F645}-\u{1F647}\u{1F64B}\u{1F64D}\u{1F64E}\u{1F6A3}\u{1F6B4}-\u{1F6B6}\u{1F926}\u{1F935}\u{1F937}-\u{1F939}\u{1F93D}\u{1F93E}\u{1F9B8}\u{1F9B9}\u{1F9CD}-\u{1F9CF}\u{1F9D4}\u{1F9D6}-\u{1F9DD}]|[\u{1F46F}\u{1F93C}\u{1F9DE}\u{1F9DF}]|[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55\u{1F004}\u{1F0CF}\u{1F18E}\u{1F191}-\u{1F19A}\u{1F201}\u{1F21A}\u{1F22F}\u{1F232}-\u{1F236}\u{1F238}-\u{1F23A}\u{1F250}\u{1F251}\u{1F300}-\u{1F320}\u{1F32D}-\u{1F335}\u{1F337}-\u{1F37C}\u{1F37E}-\u{1F384}\u{1F386}-\u{1F393}\u{1F3A0}-\u{1F3C1}\u{1F3C5}\u{1F3C6}\u{1F3C8}\u{1F3C9}\u{1F3CF}-\u{1F3D3}\u{1F3E0}-\u{1F3F0}\u{1F3F8}-\u{1F407}\u{1F409}-\u{1F414}\u{1F416}-\u{1F43A}\u{1F43C}-\u{1F43E}\u{1F440}\u{1F444}\u{1F445}\u{1F451}-\u{1F465}\u{1F46A}\u{1F479}-\u{1F47B}\u{1F47D}-\u{1F480}\u{1F484}\u{1F488}-\u{1F48E}\u{1F490}\u{1F492}-\u{1F4A9}\u{1F4AB}-\u{1F4FC}\u{1F4FF}-\u{1F53D}\u{1F54B}-\u{1F54E}\u{1F550}-\u{1F567}\u{1F5A4}\u{1F5FB}-\u{1F62D}\u{1F62F}-\u{1F634}\u{1F637}-\u{1F644}\u{1F648}-\u{1F64A}\u{1F680}-\u{1F6A2}\u{1F6A4}-\u{1F6B3}\u{1F6B7}-\u{1F6BF}\u{1F6C1}-\u{1F6C5}\u{1F6D0}-\u{1F6D2}\u{1F6D5}-\u{1F6D7}\u{1F6EB}\u{1F6EC}\u{1F6F4}-\u{1F6FC}\u{1F7E0}-\u{1F7EB}\u{1F90D}\u{1F90E}\u{1F910}-\u{1F917}\u{1F91D}\u{1F920}-\u{1F925}\u{1F927}-\u{1F92F}\u{1F93A}\u{1F93F}-\u{1F945}\u{1F947}-\u{1F976}\u{1F978}\u{1F97A}-\u{1F9B4}\u{1F9B7}\u{1F9BA}\u{1F9BC}-\u{1F9CB}\u{1F9D0}\u{1F9E0}-\u{1F9FF}\u{1FA70}-\u{1FA74}\u{1FA78}-\u{1FA7A}\u{1FA80}-\u{1FA86}\u{1FA90}-\u{1FAA8}\u{1FAB0}-\u{1FAB6}\u{1FAC0}-\u{1FAC2}\u{1FAD0}-\u{1FAD6}]/gu.source})+`,"gum");return u.replaceAll(F,(u,F)=>(null==F?void 0:F.length)>0?u:`<__EMOJI__>${u}</__EMOJI__>`)})(u)),u=(u=>u.replace(S,(u,F,t="")=>{let e=`<${F}${t}></${F}>`;return e=e.replace(/\s+/g," "),e=e.replace(/\s>/g,">"),e}))(u);const i=w(F),s=[];let r;for(;r=i.exec(u);){const u=b(r);s.push(u)}const o=((u,F)=>{const t=[];let e,n=u,i=0;for(e of F)if(void 0!==n){const{tag:u,index:F}=e,s=F-i,r=s+u.length;i+=r;const o=n.substr(0,s);t.push(o),n=n.substr(r)}return t.push(n),t})(u,s),a=((u,F,t=m)=>{const n={children:[]};""!==u[0]&&n.children.push(u[0]);const i=[n];for(let t=0;t<F.length;t++){var s;const n=F[t],r=null!=(s=u[t+1])?s:"";if(n.isOpening){const u=v(n);""!==r&&u.children.push(r),e(i).children.push(u),i.push(u)}else{const u=i.pop();if(void 0===u||u.tag!==n.tagName)throw new Error(`Unexpected tag nesting. Found a closing tag "${n.tagName}" that doesn't match the previously open tag "${null==u?void 0:u.tag}"`);""!==r&&e(i).children.push(r)}}return i.length>1&&t("unclosed-tags",`Found ${i.length-1} unclosed tags in\n${i.map(u=>u.tag).join("-")}`),n.children})(o,s,n);return{children:a}})(this.text,Object.keys(this.tagStyles),this.options.wrapEmoji,this.logWarning),n,r),l=((t,e="words",n=!0,i)=>{var s,r;const o=t.style;let a;const l=(t,s)=>r=>{let o=[];const D=I(t.align);if(z.style=F({},t,{align:D,wordWrap:!1,dropShadowBlur:0,dropShadowDistance:0,dropShadowAngle:0,dropShadow:!1}),"string"==typeof r){const u=((u,F)=>{if("words"===F)return[u].flatMap(K).filter(q);if("characters"===F)return u.split("");{let u=' Supported styles are "words" and "characters"';const t=F.toLowerCase();throw 0===t.indexOf("char")?u='Did you mean "characters"?':0===t.indexOf("wor")&&(u='Did you mean "words"?'),new Error(`Unsupported split style "${F}". ${u}`)}})(r,e),n=u.map(u=>{var e,n;switch(t.textTransform){case"uppercase":z.text=u.toUpperCase();break;case"lowercase":z.text=u.toLowerCase();break;case"capitalize":z.text=_(u);break;default:z.text=u}if(a=F({},$(z,!0)),!1===T(r)){var o;const u=null!=(o=z.style.strokeThickness)?o:0;u>0&&(a.descent+=u/2,a.ascent+=u/2,a.fontSize=a.ascent+a.descent)}const l=null!=(e=t.fontScaleWidth)?e:1,D=null!=(n=t.fontScaleHeight)?n:1,E=isNaN(l)||l<0?0:l,B=isNaN(D)||D<0?0:D;z.scale.set(E,B),a.ascent*=B,a.descent*=B,a.fontSize*=B;const h=P(z),d=((u,F,t)=>{const{ascent:e,descent:n}=t,i=e,s=n,r=i-s,{width:o}=F;return["underline","overline","lineThrough"].map(function(F){var t;const e=u[`${F}Color`],a=u[`${F}Thickness`],l=null!=(t=u[`${F}Offset`])?t:0;if(void 0===e||void 0===a)return;let D=l;return"underline"===F?D+=i+n/2:"lineThrough"===F&&(D+=s+r/2),{color:e,bounds:{x:0,y:D,width:o,height:a}}}).filter(u=>void 0!==u)})(t,h,a),C=((u,F={},t)=>{var e,n,i,s;const r=null!=(e=null==(n=u.fontFamily)?void 0:n.toString())?e:"",o=null!=(i=u.adjustBaseline)?i:0,a=null!=(s=F[r])?s:null;let l=o;if("string"==typeof a){const u=a.split("%"),F=u.length>1,e=Number(u[0]);l+=F?t*(e/100):e}else l+=Number(a);return l})(t,i,a.ascent);a.ascent+=C;const{letterSpacing:c}=t;c&&(h.width+=c);const p={content:u,style:t,tags:s,bounds:h,fontProperties:a,textDecorations:d};var A;return T(u)&&(h.width-=null!=(A=t.strokeThickness)?A:0),p});o=o.concat(n)}else if(r instanceof u.Sprite){const u=r,e="icon"===t.imgDisplay;if(a=F({},$(z,!0)),e){const F=Math.max(u.height,1);if(F>1&&1===u.scale.y){const{iconScale:e=1}=t;u.scale.set(a.ascent/F*.8*e)}if(n){const{fontScaleWidth:F=1,fontScaleHeight:e=1}=t;u.scale.x*=F,u.scale.y*=e}}const i=P(u),{letterSpacing:l}=t;l&&e&&(i.width+=l),o.push({content:u,style:t,tags:s,bounds:i,fontProperties:a,textDecorations:void 0})}else{const u=r,{children:F}=u,t=u.style,e=u.tags;if(void 0===t)throw new Error(`Expected to find a 'style' property on ${u}`);o=o.concat(F.flatMap(l(t,e)))}return o},E=t.children.flatMap(l(o,"")),{wordWrap:h,wordWrapWidth:d}=o,c=void 0!==d&&!1===isNaN(d)&&d>0,g=null!=(s=o.lineSpacing)?s:0,f=null!=(r=o.align)?r:"left";return((u,t,e,n,i)=>{const s={x:0,y:0};let r=0,o=[],a=[];const l=[];let E,h=0;for(let F=0;F<u.length;F++){E=u[F];const e=b(E),n=C(E),i=p(E),o=B(E);((n||o)&&e||i||E.style.breakWords)&&v(),S(E),m(E),(n&&e||i)&&v(),(i||x(E)||s.x+r>t&&a.length>0)&&y(E)}o.length>0&&v(),a.length>0&&f();const d=(u=>{for(const F of u){let u=F.length;for(;u>=0;){u-=1;const t=F[u];if(A(t))break;for(const u of t)u.bounds.width=0,u.bounds.height=Math.min(u.bounds.height,u.fontProperties.fontSize)}}return u})(l),c=((u,F,t)=>{let e,n;switch(u){case"left":e=V,n=e;break;case"right":e=J(F),n=e;break;case"center":e=Z(F),n=e;break;case"justify":case"justify-left":e=X(F),n=V;break;case"justify-right":e=X(F),n=J(F);break;case"justify-center":e=X(F),n=Z(F);break;case"justify-all":e=X(F),n=e;break;default:throw new Error(`Unsupported alignment type ${u}! Use one of : "left", "right", "center", "justify", "justify-left", "justify-right", justify-center", "justify-all"`)}for(const u of t){const F=t.indexOf(u)===t.length-1||u.flat(2).filter(p).length>0,i=[];let s;for(const F of u){const u=H(F);if(i.push(u),isNaN(u.x))throw new Error("wordBounds not correct")}s=F?n(i):e(i);for(let F=0;F<u.length;F++){const t=u[F];u[F]=R(s[F].x)(t)}}return t})(n,t,d),g=((u,t,e)=>{let n=D(),i=0,s=0;const r=[];for(const e of u){var o,a,l,E;const u=[];let D=Y(e),d=(null!=(o=null==(a=D.bounds)?void 0:a.height)?o:0)+s,C=(null!=(l=null==(E=D.fontProperties)?void 0:E.ascent)?l:0)+s;const c=s;var h;s=0,p(e[e.length-1][0])&&(s=null!=(h=D.style.paragraphSpacing)?h:0),B(D)&&(d+=D.fontProperties.descent,C=D.bounds.height),0===d?D=n:n=D;for(const t of e){const e=[];for(const u of t){const{bounds:t,fontProperties:n,style:s}=u,{height:r}=t,o=F({},t),a=s.valign;let{ascent:l}=n;if(B(u)&&(l=u.bounds.height),p(u)){const t=F({},u);t.bounds.y=i+C-l,e.push(t);continue}let D=i;switch(a){case"bottom":D+=d-r;break;case"middle":D+=(d+c-r)/2;break;case"top":D+=c;break;default:D+=C-l}o.y=D;const E=F({},u,{bounds:o});e.push(E)}u.push(e)}i+=d+t,r.push(u)}return r})(c,e);return g;function f(){l.push(a),a=[]}function y(u){f(),s.x=0,s.y=s.y+h,h=0,m(u)}function m(u){var F,t,n,i;const s=null!=(F=null==u||null==(t=u.fontProperties)?void 0:t.fontSize)?F:0,r=null!=(n=null==u||null==(i=u.bounds)?void 0:i.height)?n:0;h=Math.max(h,s,e),!1===p(u)&&(h=Math.max(h,r))}function w(u){m(u),u.bounds.x=s.x,u.bounds.y=s.y,s.x+=u.bounds.width}function x(u){return"block"===u.style.imgDisplay}function b(u){var F;return null==(F=u.style.breakLines)||F}function S(u){o.push(u),r+=u.bounds.width}function v(){o.forEach(w),void 0!==o&&o.length>0&&a.push(o),o=[],r=0}})(E,h&&c?d:Number.POSITIVE_INFINITY,g,f)})(o,i,s,this.options.adjustFontBaseline);return this._tokens=l,this._needsDraw=!0,this.drawIfShould(t),this.options.debugConsole&&console.log(this.toDebugString()),this._needsUpdate=!1,l}drawIfShould(u){return(!1===u||void 0===u&&!1===this.options.skipDraw)&&(this.draw(),!0)}draw(){if(this.resetChildren(),null===this.textContainer||null===this.spriteContainer)throw new Error("Somehow the textContainer or spriteContainer is null. This shouldn't be possible. Perhaps you've destroyed this object?");const u=this.textContainer,F=this.spriteContainer,{drawWhitespace:t}=this.options,e=t?this.tokensFlat:this.tokensFlat.filter(A);let n,i=!1;e.forEach(t=>{if(d(t)&&(n=this.createTextFieldForToken(t),u.addChild(n),this.textFields.push(n),t.textDecorations&&t.textDecorations.length>0)){for(const u of t.textDecorations){const F=this.createDrawingForTextDecoration(u);n.addChild(F),this._decorations.push(F)}i=!0}B(t)&&(n=t.content,this.sprites.push(n),F.addChild(n));const{bounds:e}=t;n.x=e.x,n.y=e.y}),!1===t&&i&&this.logWarning("text-decoration-and-whitespace","Text decorations, such as underlines, will not appear under whitespace unless the `drawWhitespace` option is set to `true`."),this.options.debug&&this.drawDebug(),this._needsDraw=!1}createDrawingForTextDecoration(F){const{overdrawDecorations:t=0}=this.options,{bounds:e}=F;let{color:n}=F;const i=new u.Graphics;"string"==typeof n&&(0===n.indexOf("#")?(n="0x"+n.substring(1),n=parseInt(n,16)):this.logWarning("invalid-color","Sorry, at this point, only hex colors are supported for textDecorations like underlines. Please use either a hex number like 0x66FF33 or a string like '#66FF33'"));const{y:s,height:r}=e,o=Math.min(e.x-t,e.x+e.width/2),a=Math.max(e.width+2*t,0);return i.beginFill(n).drawRect(o,s,a,r).endFill(),i}createTextField(t,e,n){const i="disabled"===this._bitmapTextBehavior?void 0:this.getOrCreateBitmapFont(n);return i?new u.BitmapText(e,F({fontName:i},this.getDynamicBitmapTextStyleFromTextStyle(n))):new u.Text(e,n)}getOrCreateBitmapFont(F){if("string"==typeof F.fontFamily){if(F.fontFamily in u.BitmapFont.available)return F.fontFamily;if("prefer"===this._bitmapTextBehavior)return}const t=this.getGeneratedBitmapFontName(F);if(!(t in u.BitmapFont.available)){const[e,n]=this.getConfigForGeneratedBitmapFont(t,F);u.BitmapFont.from(t,e,n)}return t}getGeneratedBitmapFontName(u){const t="string"!=typeof u.fontFamily?"font":u.fontFamily.toLowerCase().replace(/[^a-zA-Z0-9_]/gi,"-"),e=["align","fontSize","fill","letterSpacing","wordWrapWidth"],n=F({},u);for(const u of e)delete n[u];return`${t}-${Math.abs(function(u){const F=JSON.stringify(u,Object.keys(u).sort());let t=0;for(let u=0,e=F.length;u<e;u++)t=(t<<5)-t+F.charCodeAt(u),t|=0;return t}(n))}`}getConfigForGeneratedBitmapFont(u,F){return[F,this._bitmapFontOptions]}getDynamicBitmapTextStyleFromTextStyle(u){var F,t,e,n;return{fontSize:"number"==typeof u.fontSize?u.fontSize:void 0,letterSpacing:null!=(F=u.letterSpacing)?F:0,maxWidth:null!=(t=u.wordWrapWidth)?t:void 0,align:null!=(e=u.align)?e:void 0,tint:null!=(n=u.fill)?n:16777215}}createTextFieldForToken(t){const{textTransform:e=""}=t.style;let n=t.content;switch(e.toLowerCase()){case"lowercase":n=n.toLowerCase();break;case"uppercase":n=n.toUpperCase();break;case"capitalize":n=_(n)}const i=I(t.style.align),s=F({},t.style,{align:i}),r=this.createTextField(t,n,s);let{fontScaleWidth:o=1,fontScaleHeight:a=1}=t.style;o=isNaN(o)||o<0?0:o,a=isNaN(a)||a<0?0:a;let l=o,D=a;const E=Math.max(o,a);if(E>1){var B;E===a?(l/=E,D=1):(D/=E,l=1);const F=r instanceof u.Text?null!=(B=r.style.fontSize)?B:0:r.fontSize,t=("string"==typeof F?(u=>{const[F,t]=u.split(/(%|pt|px|r?em)/),e=parseFloat(F);switch(t){case"%":return.16*e;case"em":case"rem":return 16*e;case"pt":return 1.3281472327365*e;default:return e}})(F):F)*E;r instanceof u.Text?r.style.fontSize=t:r.fontSize=t}return r.scale.set(l,D),r}toDebugString(){const u=this.tokens;let F=this.untaggedText+"\n=====\n";return void 0!==u&&(F+=u.map((u,F)=>u.map((u,t)=>u.map((u,e)=>{let n="";d(u)?n=p(u)?"\\n":`"${u.content}"`:B(u)&&(n="[Image]");let i=`\n${n}: (${F}/${t}/${e})`;return i+=`\n    tags: ${0===u.tags.length?"<none>":u.tags.split(",").map(u=>`<${u}>`).join(", ")}`,i+=`\n    style: ${Object.entries(u.style).map(u=>u.join(":")).join("; ")}`,i+=`\n    size: x:${u.bounds.x} y:${u.bounds.y} width:${u.bounds.width} height:${u.bounds.height} bottom:${u.bounds.height+u.bounds.y} right:${u.bounds.x+u.bounds.width}`,i+=`\n    font: fontSize:${u.fontProperties.fontSize} ascent:${u.fontProperties.ascent} descent:${u.fontProperties.descent}`,i}).join("\n")))),F}drawDebug(){const F=this.tokens;if(this._debugGraphics=new u.Graphics,null===this.debugContainer)throw new Error("Somehow the debug container is null. This shouldn't be possible. Perhaps you've destroyed this object?");this.debugContainer.addChild(this._debugGraphics);const t=this._debugGraphics;function e(F,t){const e=new u.Text(F,uu);return e.x=t.x+1,e.y=t.y+1,e}t.clear();for(let u=0;u<F.length;u++){const i=F[u],s=H(i);if(this.defaultStyle.wordWrap){var n;const u=null!=(n=this.defaultStyle.wordWrapWidth)?n:this.width;t.endFill().lineStyle(.5,16776960,.2).drawRect(0,s.y,u,s.height).endFill()}for(let u=0;u<i.length;u++){const F=i[u];for(const u of F){const F=B(u),{x:n,y:i,width:s}=u.bounds,r=i+(F?u.bounds.height:u.fontProperties.ascent);let o,{height:a}=u.bounds;F&&(a+=u.fontProperties.descent),C(u)&&!1===this.options.drawWhitespace?t.lineStyle(1,11184810,1).beginFill(13421772,.2):t.lineStyle(1,16764108,1).beginFill(15658734,.2),p(u)?this.debugContainer.addChild(e("â†©ï¸Ž",{x:n,y:i+10})):t.lineStyle(.5,16776960,.2).drawRect(n,i,s,a).endFill().lineStyle(1,16777113,1).beginFill().drawRect(n,r,s,1).endFill(),d(u)&&(o=`${u.tags}`,this.debugContainer.addChild(e(o,{x:n,y:i})))}}}}}eu.DEFAULT_BITMAP_FONT_OPTIONS={chars:u.BitmapFont.ASCII,resolution:window.devicePixelRatio},eu.DEFAULT_BITMAP_TEXT_BEHAVIOR="always";export{eu as default};
//# sourceMappingURL=pixi-tagged-text.modern.js.map
